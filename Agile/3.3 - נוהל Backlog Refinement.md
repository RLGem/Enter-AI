# 3.3 — נוהל: Backlog Refinement (טיוב Backlog)

**חלק:** ג׳ — נהלי טקסים
**גרסה:** 1.0
**תאריך:** 26.02.2026
**זמן קריאה משוער:** 10 דקות
**קהל יעד:** מפתחים (חובה), Product Owner (חובה), Scrum Master (חובה)
**סביבת עבודה:** Azure DevOps | ספרינטים של 3 שבועות

---

## תוכן עניינים

| סעיף | תוכן |
|-------|-------|
| 3.3.1 | מטרה — להכין Stories כך שיהיו מוכנים ל-Sprint Planning |
| 3.3.2 | תדירות — פעם בשבוע, שעה (או פעמיים בשבועות 1-2 של הספרינט) |
| 3.3.3 | Definition of Ready — רשימת תיוג: מתי Story מוכן |
| 3.3.4 | הערכת מאמץ — Planning Poker צעד-אחר-צעד |
| 3.3.5 | פיצול Stories — טכניקות לפירוק Story גדול |
| 3.3.6 | כתיבת Acceptance Criteria — דוגמאות מעשיות |
| 3.3.7 | Azure DevOps — עדכון Stories, הוספת פרטים, Tags |
| 3.3.8 | אנטי-דפוסים — Refinement שהופך ל-Planning, Stories עמומים |
| נספח | רשימת תיוג למנחה ה-Refinement (SM) |

---

## 3.3.1 מטרה — להכין Stories כך שיהיו מוכנים ל-Sprint Planning

Backlog Refinement (שמכונה גם Backlog Grooming) הוא **הטקס שמכין את הקרקע ל-Sprint Planning**. אם Refinement נעשה כמו שצריך, ה-Planning לוקח חצי מהזמן — כי ה-Stories כבר ברורים, מוערכים, וקטנים מספיק.

### מה קורה ב-Refinement?

| פעילות | פירוט |
|--------|-------|
| **הבהרה** | ה-PO מציג Stories, הצוות שואל שאלות עד ש-Story ברור |
| **הערכה** | הצוות מעריך מאמץ ב-Story Points (Planning Poker) |
| **פיצול** | Stories גדולים מדי (13+) מפורקים ל-Stories קטנים יותר |
| **כתיבת קריטריונים** | הצוות וה-PO כותבים או מחדדים Acceptance Criteria |
| **סימון מוכנות** | Story שעומד ב-Definition of Ready מסומן כ-"Ready" |

### מה Refinement לא?

| Refinement **לא** | הסבר |
|--------------------|-------|
| Sprint Planning | לא מחליטים מה נכנס לספרינט. רק מכינים Stories שיהיו מוכנים לבחירה. |
| Design Session | לא עושים תכנון טכני מפורט. אם צריך — זו פגישה נפרדת. |
| פגישת דרישות | לא כותבים דרישות מאפס. ה-PO מביא Stories מוכנים ברמה ראשונית. |

### כלל הזהב: שני ספרינטים קדימה

> **הצוות צריך לשמור תמיד על מלאי של Stories מוכנים (Ready) בהיקף של 2 ספרינטים.**
>
> למה? כי אם יש מספיק Stories מוכנים, ה-Sprint Planning חלק ומהיר. אם ה-Backlog רעב — ה-Planning יהפוך ל-Refinement מאולתר, ייקח 6 שעות, ואף אחד לא יהיה מרוצה.

**דוגמה מספרית:**

| מדד | ערך |
|-----|-----|
| Velocity ממוצע | 31 Story Points לספרינט |
| מלאי נדרש (2 ספרינטים) | ~62 Story Points של Stories מוכנים |
| Stories מועמדים ב-Refinement | 8-12 Stories בכל פגישה |

---

## 3.3.2 תדירות — פעם בשבוע, שעה

### ההמלצה לספרינט של 3 שבועות

| שבוע בספרינט | Refinement | הערות |
|:------------:|:----------:|-------|
| **שבוע 1** | יום רביעי, שעה אחת | Refinement ראשון — עבודה על Stories לספרינט הבא והבא-אחריו |
| **שבוע 2** | יום רביעי, שעה אחת | Refinement שני — השלמת Stories שלא הספיקו, פיצול Stories גדולים |
| שבוע 2 (אופציונלי) | יום שני, 30 דקות | **רק אם צריך:** סבב נוסף ל-Stories שנשארו עם שאלות פתוחות |
| **שבוע 3** | לא מתקיים | השבוע מוקדש ל-Sprint Review, Retro, ו-Planning של הספרינט הבא |

### למה דווקא יום רביעי?

- **רחוק מספיק מה-Planning** (שמתקיים ביום ראשון של הספרינט) — נותן ל-PO זמן לעדכן Stories אחרי ה-Refinement
- **באמצע השבוע** — לא מפריע לריכוז של תחילת/סוף השבוע
- **מותר לשנות** — אם יום אחר מתאים יותר לצוות, שנו. העיקר שזה קבוע

### השקעת זמן מומלצת

| משתתף | זמן ב-Refinement | הכנה לפני |
|--------|:-----------------:|:---------:|
| Product Owner | שעה בשבוע | 2-3 שעות (הכנת Stories) |
| Scrum Master | שעה בשבוע | 30 דקות (לוגיסטיקה) |
| מפתחים | שעה בשבוע | 15 דקות (קריאת Stories מראש) |

### תרשים שבועי — מיקום ה-Refinement בספרינט

```
ספרינט של 3 שבועות — מבט-על
════════════════════════════════════════════════════════════════

שבוע 1
──────
ראשון      שני       שלישי     רביעי      חמישי
Planning   Daily     Daily     Daily      Daily
(4 שעות)                       +Refinement
                               (1 שעה)

שבוע 2
──────
ראשון      שני       שלישי     רביעי      חמישי
Daily      Daily     Daily     Daily      Daily
           (Ref.                +Refinement
           אופציונלי            (1 שעה)
           30 דק')

שבוע 3
──────
ראשון      שני       שלישי     רביעי      חמישי
Daily      Daily     Daily     Daily      Review
                                          +Retro
                               (אין Ref)  +Planning
                                          (של הספרינט הבא)
```

> **כלל אצבע:** לא יותר מ-10% מזמן הספרינט מוקדש ל-Refinement. בספרינט של 3 שבועות (15 ימי עבודה) = עד 12 שעות צוות. שעה בשבוע כפול 5 אנשים כפול 2-3 שבועות = 10-15 שעות. זה בול.

---

## 3.3.3 Definition of Ready (DoR) — רשימת תיוג: מתי Story מוכן

### מה זה Definition of Ready?

כמו ש-Definition of Done (DoD) מגדיר מתי Story **סיים**, כך Definition of Ready (DoR) מגדיר מתי Story **מוכן להיכנס לספרינט**. Story שלא עומד ב-DoR לא נכנס ל-Sprint Planning.

### רשימת התיוג — Story מוכן (Ready) כאשר:

- [ ] **תיאור ברור ושלם** — כתוב בפורמט User Story: "בתור [תפקיד], אני רוצה [פעולה], כדי ש-[ערך]"
- [ ] **ערך עסקי מוגדר** — ברור למה ה-Story חשוב ולמי הוא משרת
- [ ] **Acceptance Criteria כתובים** — לפחות 2-3 קריטריונים ברורים (ראו סעיף 3.3.6)
- [ ] **מוערך ב-Story Points** — הצוות העריך את המאמץ באמצעות Planning Poker
- [ ] **תלויות מזוהות** — אם ה-Story תלוי בצוות אחר, ב-API חיצוני, או בהחלטה עסקית — זה מתועד
- [ ] **אין שאלות פתוחות** — כל השאלות שעלו ב-Refinement קיבלו תשובה
- [ ] **קטן מספיק** — ניתן להשלמה בספרינט אחד (מומלץ: עד 8 Story Points)
- [ ] **ניתן להדגמה** — אפשר להראות את התוצאה ב-Sprint Review
- [ ] **ניתן לבדיקה** — ברור איך לבדוק שה-Story עובד כמצופה

### כרטיס DoR להדפסה

```
╔══════════════════════════════════════════════════════════════╗
║              Definition of Ready — רשימת תיוג               ║
║                                                              ║
║  Story מוכן לספרינט כאשר:                                   ║
║                                                              ║
║  □  תיאור ברור בפורמט User Story                            ║
║  □  ערך עסקי מוגדר — ברור למה ולמי                          ║
║  □  Acceptance Criteria כתובים (2-3 לפחות)                  ║
║  □  מוערך ב-Story Points (Planning Poker)                   ║
║  □  תלויות מזוהות ומתועדות                                  ║
║  □  אין שאלות פתוחות                                        ║
║  □  קטן מספיק — ניתן להשלמה בספרינט אחד                    ║
║  □  ניתן להדגמה ב-Sprint Review                             ║
║  □  ניתן לבדיקה — ברור איך לבדוק                            ║
║                                                              ║
║  Story שלא עומד ב-DoR ← לא נכנס ל-Sprint Planning          ║
║                                                              ║
╚══════════════════════════════════════════════════════════════╝
```

### מי אחראי על מה ב-DoR?

| קריטריון | אחראי ראשי | תומכים |
|----------|:----------:|:------:|
| תיאור ברור | PO | צוות שואל שאלות |
| ערך עסקי | PO | — |
| Acceptance Criteria | PO | צוות מחדד |
| הערכת Story Points | צוות (כולם) | SM מנחה |
| תלויות | PO + צוות | SM מתאם |
| שאלות פתוחות | PO סוגר | צוות מעלה |
| גודל מתאים | צוות + SM | PO מפצל |

---

## 3.3.4 הערכת מאמץ — Planning Poker צעד-אחר-צעד

Planning Poker הוא שיטת ההערכה שבה **כל חברי הצוות מעריכים במקביל**, בלי להשפיע אחד על השני. זה מונע מצב שבו הבכיר ביותר אומר מספר — וכולם פשוט מסכימים.

### סולם ההערכה — פיבונאצ'י (Fibonacci)

| ערך | משמעות | דוגמה |
|:---:|---------|-------|
| **1** | טריוויאלי — מאוד קטן ופשוט | שינוי טקסט בכפתור, הוספת שדה פשוט |
| **2** | קטן — ברור לחלוטין, כמעט אין סיכון | הוספת ולידציה לשדה קיים |
| **3** | בינוני-קטן — עבודה של יום-יומיים, מוכר | דף הגדרות פשוט עם 3-4 שדות |
| **5** | בינוני — עבודה של כמה ימים, קצת מורכבות | אינטגרציה עם API חיצוני מתועד |
| **8** | גדול — עבודה של שבוע+, מורכבות גבוהה | תהליך רכישה מקצה לקצה |
| **13** | גדול מאוד — **שקלו לפצל** | מערכת הרשאות מלאה |
| **20** | ענקי — **חייבים לפצל** | מודול שלם (CRM, דוחות) |

> **כלל ברזל:** אם Story מוערך ב-13 ומעלה — הוא צריך פיצול (ראו סעיף 3.3.5). אל תכניסו Story של 13+ לספרינט.

### תהליך Planning Poker — 7 צעדים

**שלב 1 — ה-PO מציג את ה-Story (1-2 דקות)**

ה-PO קורא את ה-Story בקול:
- כותרת
- תיאור (User Story)
- Acceptance Criteria
- הקשר עסקי — למה זה חשוב

**שלב 2 — הצוות שואל שאלות הבהרה (Timebox: 3 דקות)**

- כל מפתח שואל מה שלא ברור
- ה-PO עונה
- ה-SM שומר על 3 דקות — אם לא סיימנו, סימן שה-Story לא מוכן

> **אם אחרי 3 דקות עדיין יש שאלות פתוחות בסיסיות** — ה-SM מכריז: "ה-Story הזה לא Ready. ה-PO יחזור אליו בפגישה הבאה עם תשובות." לא מעריכים Story לא ברור.

**שלב 3 — כל אחד בוחר קלף (30 שניות)**

- כל מפתח בוחר קלף מתוך הסולם: 1, 2, 3, 5, 8, 13, 20
- **הקלף הפוך** — אף אחד לא רואה את הבחירה של האחרים
- קלף מיוחד: **"?"** = "אני לא מבין מספיק כדי להעריך"
- קלף מיוחד: **"קפה"** = "אני צריך הפסקה" (אופציונלי ומומלץ)

**שלב 4 — חשיפה בו-זמנית**

ה-SM אומר: "1... 2... 3... חשפו!" — כולם מראים את הקלף באותו רגע.

| תוצאה | מה עושים |
|--------|----------|
| כולם הראו אותו מספר | מצוין. זו ההערכה. ממשיכים הלאה. |
| פער קטן (למשל 3, 3, 5, 3) | ממוצע/הסכמה מהירה. |
| פער גדול (למשל 2, 2, 8, 3) | עוברים לשלב 5 — דיון. |

**שלב 5 — הנמוך ביותר והגבוה ביותר מסבירים (2 דקות)**

- מי שהראה את המספר **הנמוך ביותר** מסביר: "למה לדעתי זה קטן?"
- מי שהראה את המספר **הגבוה ביותר** מסביר: "למה לדעתי זה גדול?"
- השאר מקשיבים — לא דיון חופשי, רק שני ההסברים

> **הערך של שלב 5:** בדרך כלל, מי שהעריך גבוה חושב על סיכון שאחרים לא ראו. מי שהעריך נמוך מכיר פתרון פשוט. שניהם מלמדים את הקבוצה משהו.

**שלב 6 — הצבעה חוזרת (30 שניות)**

אחרי ששמעו את ההסברים, כולם בוחרים קלף שוב ומגלים.

**שלב 7 — רישום ההערכה**

| מצב | מה עושים |
|-----|----------|
| הגיעו להסכמה | רושמים את ההערכה המוסכמת |
| עדיין פער אחרי סיבוב 2 | **לוקחים את המספר הגבוה יותר** מבין שני המספרים השכיחים |
| עדיין פער גדול אחרי סיבוב 2 | ה-Story לא מובן מספיק — חוזר ל-PO להבהרה |

> **כלל: אם לא הגעתם להסכמה אחרי 2 סיבובים — קחו את המספר הגבוה.** עדיף להעריך קצת יותר מדי מאשר להתחייב על פחות מדי. ומה שחשוב יותר — אל תבזבזו 15 דקות על הערכה של Story אחד.

### טיפים ל-Planning Poker

| טיפ | הסבר |
|-----|------|
| **Timebox: 5 דקות לכל Story** | כולל שאלות, הצבעה, דיון. אם לוקח יותר — ה-Story לא ברור. |
| **PO לא מצביע** | ה-PO מסביר, הצוות מעריך. אם ה-PO יצביע — זה ישפיע. |
| **SM לא מצביע (בד"כ)** | אלא אם כן ה-SM גם מפתח בצוות. |
| **Reference Story** | הגדירו Story אחד ידוע כ-"Story של 3 נקודות" (Benchmark). כל ההערכות ביחס אליו. |
| **אל תשוו לשעות** | Story Points הם מידת מורכבות, לא שעות. "5" לא שווה "5 שעות". |
| **הערכה אחידה** | Story שמתכנת מנוסה מעריך ב-2 ומתכנת חדש ב-8 — הפער מצביע על צורך בהכשרה או Pair Programming, לא על הערכה שגויה. |

### כלים ל-Planning Poker

| כלי | סוג | מתאים ל- |
|-----|-----|-----------|
| קלפים פיזיים | כרטיסיות מודפסות | צוות שיושב ביחד |
| כלים מקוונים (planningpoker.com, Scrumpoker-online.org) | אתר חינמי | צוות היברידי או מרוחק |
| Azure DevOps Extension | תוסף | צוות שעובד ב-Azure DevOps |
| אצבעות (1-5) | ללא כלי | הערכה מהירה בלי קלפים |

---

## 3.3.5 פיצול Stories — טכניקות לפירוק Story גדול

### למה לפצל?

Story גדול מדי (13+ Story Points) הוא סיכון:
- קשה להעריך בדיוק
- קשה להשלים בספרינט אחד
- קשה להדגים ב-Sprint Review
- קשה לעקוב אחרי ההתקדמות

**כלל:** כל Story שנכנס לספרינט צריך להיות **8 Story Points או פחות**. אם הוא יותר — פצלו אותו.

### 5 טכניקות פיצול

---

### טכניקה 1: פיצול לפי שלבי תהליך (Workflow Steps)

**הרעיון:** תהליך עסקי מורכב מכמה שלבים. כל שלב יכול להיות Story בפני עצמו.

**דוגמה — Story מקורי:**
> "בתור משתמש חדש, אני רוצה להירשם למערכת ולקבל אישור במייל"
> הערכה: 13 Story Points

**אחרי פיצול:**

| # | Story מפוצל | Story Points |
|:-:|-------------|:------------:|
| 1 | "בתור משתמש חדש, אני רוצה למלא טופס הרשמה (שם, מייל, סיסמה) כדי ליצור חשבון" | 5 |
| 2 | "בתור מערכת, אני רוצה לוולד את פרטי ההרשמה (מייל תקין, סיסמה חזקה) כדי למנוע חשבונות שגויים" | 3 |
| 3 | "בתור משתמש שנרשם, אני רוצה לקבל מייל אישור ולאמת את החשבון שלי" | 5 |

---

### טכניקה 2: פיצול לפי כללים עסקיים (Business Rules)

**הרעיון:** מתחילים עם המקרה הבסיסי (Happy Path), ומוסיפים כללים עסקיים ומקרי קצה בנפרד.

**דוגמה — Story מקורי:**
> "בתור לקוח, אני רוצה לחשב מחיר הזמנה כולל מבצעים, מע"מ, ודמי משלוח"
> הערכה: 20 Story Points

**אחרי פיצול:**

| # | Story מפוצל | Story Points |
|:-:|-------------|:------------:|
| 1 | "בתור לקוח, אני רוצה לראות את מחיר ההזמנה הבסיסי (סכום מוצרים)" | 2 |
| 2 | "בתור לקוח, אני רוצה שמע"מ יחושב אוטומטית על סכום ההזמנה" | 2 |
| 3 | "בתור לקוח, אני רוצה לראות עלות משלוח לפי כתובת" | 5 |
| 4 | "בתור לקוח, אני רוצה להזין קוד קופון ולקבל הנחה" | 5 |
| 5 | "בתור לקוח, אני רוצה לראות את הסכום הסופי (מוצרים + מע"מ + משלוח - הנחה)" | 3 |

---

### טכניקה 3: פיצול לפי וריאציות נתונים (Data Variations)

**הרעיון:** תומכים קודם בסוג אחד של נתונים, ואז מרחיבים.

**דוגמה — Story מקורי:**
> "בתור לקוח, אני רוצה לשלם באשראי, PayPal, או העברה בנקאית"
> הערכה: 20 Story Points

**אחרי פיצול:**

| # | Story מפוצל | Story Points |
|:-:|-------------|:------------:|
| 1 | "בתור לקוח, אני רוצה לשלם בכרטיס אשראי" | 8 |
| 2 | "בתור לקוח, אני רוצה לשלם באמצעות PayPal (בנוסף לאשראי)" | 5 |
| 3 | "בתור לקוח, אני רוצה לשלם בהעברה בנקאית (בנוסף לאמצעים הקיימים)" | 5 |

> **שימו לב:** Story 1 הוא הגדול ביותר כי כולל את התשתית (Payment Gateway, UI, Error Handling). Stories 2 ו-3 קטנים יותר כי התשתית כבר קיימת.

---

### טכניקה 4: פיצול לפי פעולות CRUD

**הרעיון:** כל פעולה (Create, Read, Update, Delete) היא Story נפרד.

**דוגמה — Story מקורי:**
> "בתור מנהל, אני רוצה לנהל את רשימת המוצרים במערכת"
> הערכה: 13 Story Points

**אחרי פיצול:**

| # | Story מפוצל | פעולה | Story Points |
|:-:|-------------|:-----:|:------------:|
| 1 | "בתור מנהל, אני רוצה להוסיף מוצר חדש למערכת" | Create | 5 |
| 2 | "בתור מנהל, אני רוצה לראות רשימת מוצרים עם חיפוש וסינון" | Read | 3 |
| 3 | "בתור מנהל, אני רוצה לערוך פרטי מוצר קיים" | Update | 3 |
| 4 | "בתור מנהל, אני רוצה למחוק מוצר (עם אישור בטיחותי)" | Delete | 2 |

---

### טכניקה 5: פיצול לפי תפקיד משתמש (User Role)

**הרעיון:** כל סוג משתמש רואה את אותו פיצ'ר אחרת.

**דוגמה — Story מקורי:**
> "בתור משתמש, אני רוצה לראות דשבורד עם נתוני המערכת"
> הערכה: 20 Story Points

**אחרי פיצול:**

| # | Story מפוצל | Story Points |
|:-:|-------------|:------------:|
| 1 | "בתור משתמש רגיל, אני רוצה לראות דשבורד עם ההזמנות שלי והסטטוס שלהן" | 5 |
| 2 | "בתור מנהל, אני רוצה לראות דשבורד עם סיכום הזמנות, הכנסות, ומשתמשים פעילים" | 8 |
| 3 | "בתור מנהל מערכת (Admin), אני רוצה לראות דשבורד עם ביצועי מערכת, שגיאות, וזמני תגובה" | 5 |

---

### טבלת סיכום — איך לבחור טכניקת פיצול

| אם ה-Story... | השתמשו ב- |
|---------------|-----------|
| מתאר תהליך עם מספר שלבים | טכניקה 1: שלבי תהליך |
| מכיל הרבה כללים עסקיים ומקרי קצה | טכניקה 2: כללים עסקיים |
| תומך בכמה סוגי נתונים/אמצעים/פורמטים | טכניקה 3: וריאציות נתונים |
| כולל ניהול מלא של ישות (יצירה, קריאה, עדכון, מחיקה) | טכניקה 4: CRUD |
| רלוונטי לכמה סוגי משתמשים | טכניקה 5: תפקיד משתמש |

> **חשוב:** אחרי פיצול, כל Story מפוצל צריך **לספק ערך בפני עצמו**. אל תפצלו ל-"Backend" ו-"Frontend" — זו לא חלוקה נכונה כי כל חלק לבדו לא מספק ערך למשתמש.

---

## 3.3.6 כתיבת Acceptance Criteria — דוגמאות מעשיות

### מה זה Acceptance Criteria?

Acceptance Criteria (קריטריוני קבלה) הם **תנאים ברורים שמגדירים מתי Story נחשב "עובד כמצופה"**. הם נכתבים לפני הפיתוח, ב-Refinement, ומשמשים את:
- **המפתחים** — כדי לדעת מה בדיוק לבנות
- **ה-PO** — כדי לאשר שהתוצאה עומדת בציפיות
- **הבודקים** — כדי לדעת מה לבדוק

### פורמט: Given / When / Then (בהינתן / כאשר / אז)

```
בהינתן (Given):  [מצב התחלתי — מה קיים לפני הפעולה]
כאשר (When):     [פעולה — מה המשתמש עושה]
אז (Then):       [תוצאה — מה צריך לקרות]
```

### דוגמה 1 — התחברות למערכת

**Story:** "בתור משתמש רשום, אני רוצה להתחבר עם מייל וסיסמה, כדי לגשת לחשבון שלי"

**Acceptance Criteria:**

| # | קריטריון |
|:-:|----------|
| AC1 | **בהינתן** שהמשתמש נמצא בדף ההתחברות, **כאשר** הוא מזין מייל וסיסמה נכונים ולוחץ "התחבר", **אז** הוא מועבר לדף הבית של החשבון שלו תוך 3 שניות |
| AC2 | **בהינתן** שהמשתמש מזין סיסמה שגויה, **כאשר** הוא לוחץ "התחבר", **אז** מוצגת הודעת שגיאה "מייל או סיסמה שגויים" (בלי לחשוף מה בדיוק שגוי) |
| AC3 | **בהינתן** שהמשתמש הזין סיסמה שגויה 5 פעמים, **כאשר** הוא מנסה שוב, **אז** החשבון ננעל ל-15 דקות ומוצגת הודעה מתאימה |
| AC4 | **בהינתן** שהמשתמש מסמן "זכור אותי", **כאשר** הוא מתחבר בהצלחה וסוגר את הדפדפן, **אז** בפתיחה הבאה הוא עדיין מחובר (עד 30 יום) |

### דוגמה 2 — חיפוש מוצרים

**Story:** "בתור לקוח, אני רוצה לחפש מוצרים לפי שם, כדי למצוא מה שאני מחפש מהר"

**Acceptance Criteria:**

| # | קריטריון |
|:-:|----------|
| AC1 | **בהינתן** שהלקוח נמצא בדף המוצרים, **כאשר** הוא מקליד לפחות 2 תווים בשדה החיפוש, **אז** מוצגות תוצאות תואמות תוך שנייה (Auto-complete) |
| AC2 | **בהינתן** שהלקוח חיפש מונח שלא מתאים לאף מוצר, **כאשר** מוצגים 0 תוצאות, **אז** מופיעה הודעה "לא נמצאו מוצרים" עם הצעות חיפוש חלופיות |
| AC3 | **בהינתן** שהלקוח חיפש "טלפון", **כאשר** יש מוצרים ששמם כולל "טלפון", "טלפון נייד", "כיסוי לטלפון", **אז** כל המוצרים הרלוונטיים מוצגים, מסודרים לפי רלוונטיות |

### דוגמה 3 — שליחת דוח במייל

**Story:** "בתור מנהל, אני רוצה לקבל דוח שבועי אוטומטי במייל, כדי לעקוב אחרי ביצועי הצוות"

**Acceptance Criteria:**

| # | קריטריון |
|:-:|----------|
| AC1 | **בהינתן** שהמנהל הפעיל "קבלת דוח שבועי" בהגדרות, **כאשר** מגיע יום ראשון בשעה 08:00, **אז** נשלח מייל אוטומטי עם דוח הביצועים של השבוע הקודם |
| AC2 | **בהינתן** שהמייל נשלח, **כאשר** המנהל פותח אותו, **אז** הדוח כולל: מספר משימות שהושלמו, זמן ממוצע לסגירת משימה, גרף התקדמות |
| AC3 | **בהינתן** שאירעה שגיאה ביצירת הדוח, **כאשר** המערכת לא מצליחה לשלוח, **אז** נשלחת התרעה ל-Admin ונעשה ניסיון חוזר אחרי שעה |

### דוגמה 4 — העלאת קובץ

**Story:** "בתור משתמש, אני רוצה להעלות תמונת פרופיל, כדי שאנשים אחרים יזהו אותי"

**Acceptance Criteria:**

| # | קריטריון |
|:-:|----------|
| AC1 | **בהינתן** שהמשתמש נמצא בדף הפרופיל שלו, **כאשר** הוא לוחץ "העלה תמונה" ובוחר קובץ JPG או PNG עד 5MB, **אז** התמונה מוצגת כתמונת הפרופיל שלו |
| AC2 | **בהינתן** שהמשתמש בוחר קובץ שאינו תמונה (PDF, DOC וכו'), **כאשר** הוא מנסה להעלות, **אז** מוצגת הודעה "פורמט לא נתמך. נא להעלות JPG או PNG" |
| AC3 | **בהינתן** שהמשתמש בוחר קובץ גדול מ-5MB, **כאשר** הוא מנסה להעלות, **אז** מוצגת הודעה "הקובץ גדול מדי. גודל מקסימלי: 5MB" |
| AC4 | **בהינתן** שלמשתמש כבר יש תמונת פרופיל, **כאשר** הוא מעלה תמונה חדשה, **אז** התמונה הישנה מוחלפת בחדשה |

### כללים לכתיבת Acceptance Criteria טובים

| כלל | הסבר |
|-----|------|
| **ספציפי** | "מהיר" זה לא ספציפי. "תוך 3 שניות" זה ספציפי. |
| **ניתן לבדיקה** | כל AC צריך להיות כזה שאפשר לכתוב לו Test — ידני או אוטומטי. |
| **מכסה Happy Path ו-Edge Cases** | אל תכתבו רק מה קורה כשהכל עובד. כתבו גם מה קורה כשמשהו לא עובד. |
| **2-5 קריטריונים ל-Story** | פחות מ-2 = Story עמום. יותר מ-5 = Story גדול מדי, שקלו לפצל. |
| **עצמאי** | כל AC ניתן לאימות בנפרד. |

---

## 3.3.7 Azure DevOps — עדכון Stories, הוספת פרטים, Tags

### שלב 1 — עדכון Story במהלך Refinement

לכל Story שנדון ב-Refinement, עדכנו ב-Azure DevOps:

| שדה | מה לעדכן | איפה בכרטיס |
|-----|----------|-------------|
| **Title** | כותרת ברורה בפורמט User Story | כותרת ראשית |
| **Description** | "בתור... אני רוצה... כדי ש..." + הקשר עסקי | שדה Description |
| **Acceptance Criteria** | קריטריוני קבלה בפורמט Given/When/Then | שדה Acceptance Criteria |
| **Story Points** | ההערכה מ-Planning Poker | שדה Effort / Story Points |
| **Tags** | הוספת Tag "Ready" כשה-Story עומד ב-DoR | שדה Tags |
| **Discussion** | שאלות ותשובות שעלו ב-Refinement | כרטיסיית Discussion |

### שלב 2 — סימון Story כ-"Ready" עם Tags

1. פתחו את ה-Work Item (Story)
2. בשדה **Tags**, הוסיפו את ה-Tag: `Ready`
3. אם ה-Story עדיין לא מוכן, הוסיפו Tag: `Needs-Refinement`
4. Tags שימושיים נוספים:

| Tag | משמעות |
|-----|--------|
| `Ready` | Story עומד ב-Definition of Ready — מוכן לספרינט |
| `Needs-Refinement` | Story צריך דיון נוסף ב-Refinement |
| `Needs-Split` | Story גדול מדי — צריך פיצול |
| `Blocked` | Story חסום — יש תלות לא פתורה |
| `Spike` | Story שדורש חקירה טכנית לפני פיתוח |

### שלב 3 — יצירת Query: "Stories מוכנים שלא בספרינט"

Query זה עוזר ל-PO ול-SM לראות כמה Stories מוכנים יש ל-Sprint Planning:

**הגדרת ה-Query:**

```
Azure DevOps → Boards → Queries → New Query

שם: "Ready Stories — Not in Sprint"

תנאים:
1. Work Item Type = User Story
2. AND Tags Contains "Ready"
3. AND State = New
4. AND Iteration Path = [Project]\Backlog  (לא משויך לספרינט ספציפי)

עמודות להצגה:
- ID
- Title
- Story Points
- Tags
- Assigned To
- Created Date

מיון: לפי Priority (עדיפות), ואז לפי Story Points
```

**איך להגיע:**

1. לכו ל-**Boards** → **Queries**
2. לחצו **+ New Query**
3. הגדירו את התנאים כמתואר למעלה
4. לחצו **Save Query** → שמרו תחת **Shared Queries** כדי שכל הצוות יראה
5. הוסיפו את ה-Query כ-Widget ב-**Dashboard** של הצוות

### שלב 4 — Dashboard Widget: מלאי Stories מוכנים

הוסיפו Widget ל-Dashboard שמציג את מלאי ה-Stories המוכנים:

1. לכו ל-**Overview** → **Dashboards**
2. לחצו **Edit** → **Add Widget**
3. בחרו **Query Results** Widget
4. הגדירו את ה-Query מסעיף הקודם כמקור
5. כך הצוות יראה בכל רגע: **כמה Stories מוכנים מחכים ל-Sprint Planning**

> **יעד:** הצוות צריך לראות ב-Dashboard מלאי של **60+ Story Points** של Stories מוכנים (2 ספרינטים קדימה). אם המלאי יורד מתחת ל-30 — זה סימן שצריך Refinement נוסף.

---

## 3.3.8 אנטי-דפוסים — מה יכול להשתבש

### אנטי-דפוס 1: Refinement שהופך ל-Planning

| | פירוט |
|---|-------|
| **תסמינים** | הצוות מתחיל לדבר על **איך** לפתח (ארכיטקטורה, טכנולוגיה, חלוקת Tasks) במקום על **מה** צריך לפתח. מפתחים מתחילים לשרטט דיאגרמות. הדיון על Story בודד נמשך 20 דקות. |
| **סיבות שורש** | ה-SM לא שומר על המיקוד. הצוות לא מבין את ההבדל בין Refinement ל-Planning. Stories מורכבים שמפתים לצלול לפרטים. |
| **כיצד לתקן** | 1. **ה-SM מגדיר את הכללים בפתיחה:** "ב-Refinement אנחנו מבהירים מה, לא איך. שאלות טכניות עמוקות — נרשום לדיון נפרד." 2. **Timebox של 5 דקות ל-Story** — כולל שאלות והערכה. 3. **מבחן פשוט:** אם המילים "Database", "API endpoint", "Architecture" עולות — זה Planning, לא Refinement. עצרו. 4. **רשמו "צריך Design Discussion"** כ-Tag על ה-Story ותזמנו פגישה נפרדת. |

### אנטי-דפוס 2: PO מגיע לא מוכן

| | פירוט |
|---|-------|
| **תסמינים** | ה-PO כותב Stories תוך כדי הפגישה. Stories ללא תיאור, ללא Acceptance Criteria. ה-PO אומר "אני אוסיף את הפרטים אחר כך". הפגישה הופכת לסיעור מוחות במקום Refinement. |
| **סיבות שורש** | ה-PO עמוס ולא הקדיש זמן להכנה. אין ציפייה ברורה שה-PO צריך להגיע מוכן. אין Refinement סדיר — הכל נדחה. |
| **כיצד לתקן** | 1. **ה-SM נפגש עם ה-PO יום לפני ה-Refinement** (15 דקות): "כמה Stories מוכנים? בוא נעבור עליהם." 2. **כלל ברור:** Story בלי תיאור ו-Acceptance Criteria לא מוצג לצוות. 3. **הגדירו "Refinement Prep"** — 2-3 שעות שה-PO מקדיש לפני כל Refinement לכתיבת Stories. 4. **אם ה-PO לא מוכן** — ה-Refinement מתקצר. הצוות לא צריך לשבת ולחכות שה-PO יכתוב Stories בזמן אמת. |

### אנטי-דפוס 3: דיונים אינסופיים ללא Timebox

| | פירוט |
|---|-------|
| **תסמינים** | Story אחד נדון 20-30 דקות. ויכוח בין מפתחים על הערכה שלא נגמר. הפגישה נגמרת עם 2 Stories מוערכים במקום 8. |
| **סיבות שורש** | ה-SM לא אוכף Timebox. הצוות לא מבין שדיונים ארוכים סימן ל-Story לא מוכן. רצון להגיע להערכה "מושלמת" במקום "טובה מספיק". |
| **כיצד לתקן** | 1. **Timebox של 5 דקות ל-Story** — ה-SM מפעיל טיימר. 2. **כלל Planning Poker:** לא הסכמה אחרי 2 סיבובים? לוקחים את הגבוה. ממשיכים. 3. **Story שדורש יותר מ-5 דקות** — לא מוכן. חוזר ל-PO. 4. **ה-SM אומר:** "שאלה מצוינת. בוא נרשום אותה ונמשיך. ה-PO יחזור עם תשובה." |

### אנטי-דפוס 4: דילוג על Refinement

| | פירוט |
|---|-------|
| **תסמינים** | "אין לנו זמן ל-Refinement השבוע." ה-Planning לוקח 6 שעות כי Stories לא מוכנים. הצוות לא מעריך Stories לפני ה-Planning — הכל קורה בפגישה. |
| **סיבות שורש** | הצוות לא מבין ש-Refinement חוסך זמן ב-Planning. לחץ עבודה — "עדיף לכתוב קוד." ה-SM לא מגן על הטקס. |
| **כיצד לתקן** | 1. **הראו את המתמטיקה:** שעה Refinement = 2 שעות חיסכון ב-Planning. בלי Refinement, ה-Planning יהיה ארוך, מתסכל, וה-Stories לא יהיו מוכנים. 2. **Refinement קבוע ביומן** — פגישה חוזרת, כמו Daily. לא מבטלים. 3. **אם באמת אי אפשר השבוע** — הוסיפו Refinement כפול בשבוע הבא. אף פעם לא מגיעים ל-Planning בלי שה-Stories עברו Refinement. |

### אנטי-דפוס 5: Stories עמומים שעוברים Refinement בלי שיפור

| | פירוט |
|---|-------|
| **תסמינים** | Story יוצא מ-Refinement באותו מצב שנכנס. Acceptance Criteria לא נכתבו ("נשלים מאוחר יותר"). שאלות נרשמו אבל לא נענו. Story מסומן "Ready" למרות שאינו. |
| **סיבות שורש** | הצוות מרגיש לחץ "להתקדם" ומסמן Stories כ-Ready למרות שלא. אין הקפדה על Definition of Ready. ה-SM לא אוכף את ה-DoR. |
| **כיצד לתקן** | 1. **ה-SM עובר על ה-DoR** לפני סימון Story כ-Ready. אם חסר פריט — Story לא Ready. נקודה. 2. **ב-Sprint Planning, ה-SM בודק:** "האם Story עומד ב-DoR?" אם לא — לא נכנס לספרינט. 3. **צרו תרבות:** "עדיף Story שלא Ready מאשר Story שנכנס לספרינט ומתפוצץ." |

### טבלת סיכום: אנטי-דפוסים

| אנטי-דפוס | סימן מרכזי | פעולה מיידית |
|-----------|-----------|-------------|
| Refinement → Planning | דיון על "איך" במקום "מה" | SM עוצר: "זה Planning, לא Refinement" |
| PO לא מוכן | Stories נכתבים בזמן אמת | SM נפגש עם PO יום לפני |
| דיונים אינסופיים | 20+ דקות על Story אחד | Timebox 5 דקות, Story לא מוכן חוזר |
| דילוג על Refinement | Planning לוקח 6 שעות | Refinement קבוע ביומן, לא מבטלים |
| Stories עמומים "עוברים" | Stories מסומנים Ready בלי DoR | SM אוכף DoR לפני סימון Ready |

---

## נספח — רשימת תיוג למנחה ה-Refinement (Scrum Master)

### לפני ה-Refinement (יום לפני)

**Scrum Master:**
- [ ] תיאמו עם ה-PO: כמה Stories מוכנים? אילו Stories מתוכננים לדיון?
- [ ] ודאו שה-PO הכין תיאור ו-Acceptance Criteria ראשוניים לכל Story
- [ ] בדקו את מלאי ה-Stories המוכנים (Ready) — אם יש מספיק, אפשר להתמקד באיכות. אם חסר — צריך לכסות יותר Stories
- [ ] שלחו לצוות רשימת ה-Stories שיידונו — **כדי שיקראו מראש**
- [ ] הזמינו חדר/קישור + הכינו קלפי Planning Poker (או כלי דיגיטלי)
- [ ] הכינו Timebox: 5 דקות ל-Story, שעה סה"כ

**Product Owner:**
- [ ] Stories מוכנים עם תיאור (User Story format)
- [ ] Acceptance Criteria ראשוניים כתובים (לפחות 2 לכל Story)
- [ ] Stories מסודרים לפי עדיפות — הצוות ידון בעדיפות הגבוהה ביותר קודם
- [ ] תלויות ידועות מתועדות
- [ ] מוכן לענות על שאלות

---

### במהלך ה-Refinement (שעה אחת)

**פתיחה (2 דקות):**
- [ ] ה-SM פותח: "מטרת הפגישה — לוודא ש-Stories מוכנים ל-Planning. לא תכנון טכני."
- [ ] ה-SM מודיע: "יש לנו X Stories לדיון. 5 דקות ל-Story. נתחיל."

**לכל Story (5 דקות):**
- [ ] ה-PO מציג: כותרת, תיאור, Acceptance Criteria (1-2 דק')
- [ ] הצוות שואל שאלות הבהרה (Timebox: 3 דק')
- [ ] אם יש שאלות שלא נענות — Story מסומן `Needs-Refinement`, ממשיכים
- [ ] Planning Poker — הערכת Story Points (2 דק')
- [ ] אם 13+ → ה-SM אומר: "צריך פיצול. PO, תחזור עם Stories מפוצלים."
- [ ] אם הסכמה → SM רושם את ההערכה
- [ ] ה-SM בודק: "האם Story עומד ב-DoR?" אם כן → מסמן Tag `Ready`

**סיכום (3 דקות):**
- [ ] ה-SM מסכם: "דנו ב-X Stories. Y מוכנים (Ready). Z צריכים עבודה נוספת."
- [ ] ה-SM מעדכן: "סה"כ יש לנו W Story Points של Stories מוכנים ב-Backlog."
- [ ] שאלות פתוחות — ה-SM מקצה אחראי ודדליין
- [ ] ה-SM מזכיר: "ה-Refinement הבא ביום [תאריך]."

---

### אחרי ה-Refinement (עד סוף היום)

**Scrum Master:**
- [ ] עדכון Azure DevOps: Story Points, Tags (Ready / Needs-Refinement / Needs-Split)
- [ ] שאלות פתוחות — שליחת סיכום ל-PO עם מה שצריך להשלים
- [ ] בדיקת מלאי: האם יש מספיק Stories מוכנים ל-2 ספרינטים?
- [ ] אם לא — תזמנו Refinement נוסף

**Product Owner:**
- [ ] השלמת Acceptance Criteria ל-Stories שנדונו
- [ ] תשובות לשאלות פתוחות — עדכון ב-Discussion של ה-Work Item
- [ ] Stories שצריכים פיצול — הכנת Stories מפוצלים ל-Refinement הבא
- [ ] הכנת Stories חדשים ל-Refinement הבא

**מפתחים:**
- [ ] אם עלו נושאים טכניים שצריכים חקירה — פתחו Spike
- [ ] אם יש הערות על Acceptance Criteria — הוסיפו ב-Discussion

---

### מדד הצלחה: Refinement עובד כשה-Planning חלק

| מדד | יעד | סימן אזהרה |
|-----|-----|------------|
| **זמן Sprint Planning** | עד 3 שעות (בלי "התדיינות ארוכה על Stories") | Planning מעל 4 שעות = Refinement לא מספיק |
| **Stories שנכנסים ל-Sprint בלי DoR** | 0 | אפילו Story אחד בלי DoR = בעיה |
| **מלאי Stories מוכנים** | 60+ Story Points (2 ספרינטים) | מתחת ל-30 = סיכון |
| **שאלות פתוחות ב-Planning** | 0-2 לכל הספרינט | מעל 5 = Refinement לא היה יסודי מספיק |
| **Stories שנגררו בגלל "לא ברור"** | 0 | כל Story שנגרר כי "לא הבנו" = כשלון Refinement |

---

**סוף מסמך 3.3 — נוהל Backlog Refinement**

| קישורים רלוונטיים | |
|---|---|
| מסמך קודם | 3.2 — נוהל: Sprint Planning (תכנון ספרינט) |
| מסמך הבא | 3.4 — נוהל: Sprint Review / Demo (הדגמת ספרינט) |
| חומר עזר | 5.1.3 — כרטיס Refinement להדפסה |
| מדריך PO מלא | 2.2 — מדריך ל-Product Owner |
| מדריך SM מלא | 2.3 — מדריך ל-Scrum Master |